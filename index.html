<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Gematria Lab</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{ --fg:#111; --muted:#555; --line:#ddd; --bg:#fff; }
    *{box-sizing:border-box}
    body{
      background: url('bg.png') no-repeat center center fixed;
      background-size: cover;
      font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; 
      color:var(--fg); margin:0; padding:24px; line-height:1.65;
    }
    h1{margin:0 0 8px 0; font-size:24px}
    .row{display:flex; gap:8px; flex-wrap:wrap}
    .card{border:1px solid var(--line); border-radius:10px; padding:14px; margin:10px 0; background:rgba(255,255,255,0.85); box-shadow:0 1px 2px rgba(0,0,0,.03)}
    label{display:block; font-size:13px; color:var(--muted); margin-bottom:6px}
    input[type=text]{width:100%; padding:10px 12px; border:1px solid var(--line); border-radius:8px; font-size:16px}
    button{padding:10px 14px; border:1px solid var(--line); border-radius:10px; background:#fafafa; cursor:pointer}
    button:hover{background:#f2f2f2}
    #result{white-space:pre-line; min-height:220px; font-size:18px; margin-top:10px; border-top:1px dashed var(--line); padding-top:10px}
    #interpretation{font-weight:700; font-size:28px; color:#000; margin-top:14px}
    #reduction-note{font-size:20px; color:#000; margin-top:6px}
    .subtle{color:var(--muted)}
  </style>
</head>
<body>

<div id="google_translate_element" style="margin-bottom:12px;"></div>
<script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement({
    pageLanguage: 'en',
    includedLanguages: 'en,ko,ja,zh-CN',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
  }, 'google_translate_element');
}
</script>
<script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<h1>üî¢ Gematria Lab ‚Äî Poetic</h1>
<div class="card">
  <div class="row">
    <div style="flex:1 1 320px; min-width:260px">
      <label>Input (Original)</label>
      <input id="raw" type="text" placeholder="Example: shalom / ◊ô◊®◊ï◊©◊ú◊ô◊ù / 109">
    </div>
    <div style="flex:1 1 320px; min-width:260px">
      <label>Input (Hebrew)</label>
      <input id="heb" type="text" placeholder="Example: ◊©◊ú◊ï◊ù / ◊ô◊®◊ï◊©◊ú◊ô◊ù / 109">
    </div>
  </div>
  <div class="row">
    <button id="btn-trans">Auto Convert (Original ‚Üí Hebrew)</button>
    <button id="btn-calc">Calculate</button>
    <span class="subtle">‚Ä¢ Numbers alone are supported (0‚Äì999 auto covered)</span>
  </div>
</div>

<div class="card">
  <h3 style="margin:0 0 4px 0">Result</h3>
  <div id="result">-</div>
  <div id="interpretation"></div>
  <div id="reduction-note"></div>
</div>

<script>
const HVAL = {"◊ê":1,"◊ë":2,"◊í":3,"◊ì":4,"◊î":5,"◊ï":6,"◊ñ":7,"◊ó":8,"◊ò":9,
"◊ô":10,"◊õ":20,"◊ö":20,"◊ú":30,"◊û":40,"◊ù":40,"◊†":50,"◊ü":50,"◊°":60,"◊¢":70,
"◊§":80,"◊£":80,"◊¶":90,"◊•":90,"◊ß":100,"◊®":200,"◊©":300,"◊™":400};

const NUMBER_INTERP = {
  18:"◊ó◊ô (Chai, Life)",
  26:"◊ô◊î◊ï◊î (YHWH, Name of God)",
  72:"72-letter Name",
  248:"Abraham",
  358:"Messiah",
  386:"Jesus",
  613:"Torah commandments",
  666:"Number of the Beast",
  777:"Spiritual completion"
};

function isHebrew(s){ return /[\u0590-\u05FF]/.test(s); }
function isNumeric(s){ return /^[0-9]+$/.test(s); }

function latinToHebrew(src){
  let s = src.toLowerCase();
  s = s.replace(/sh/g,"◊©").replace(/ts/g,"◊¶").replace(/ch/g,"◊ó").replace(/kh/g,"◊ó").replace(/th/g,"◊™").replace(/ph/g,"◊§");
  const map = {a:"◊ê", e:"◊ê", i:"◊ô", o:"◊ï", u:"◊ï", b:"◊ë", c:"◊õ", d:"◊ì", f:"◊§", g:"◊í", h:"◊î", j:"◊ñ", k:"◊õ", l:"◊ú", m:"◊û", n:"◊†", p:"◊§", q:"◊ß", r:"◊®", s:"◊°", t:"◊™", v:"◊ï", w:"◊ï", x:"◊ß◊°", y:"◊ô", z:"◊ñ"};
  let out=""; for(const ch of s){ out += (map[ch]||""); }
  return out;
}

function translitAuto(raw){
  return window.toHebrewUniversal(raw);
}

function sumHebrew(hebrew){
  let total=0, parts=[];
  for(const ch of hebrew){
    const v = HVAL[ch];
    if(v){ total+=v; parts.push([ch,v]); }
  }
  return {total, parts};
}

function reduction(n){
  let r = String(n).split("").reduce((a,c)=>a+parseInt(c,10),0);
  while(r>9){ r = String(r).split("").reduce((a,c)=>a+parseInt(c,10),0); }
  return r;
}

// üîë Ï∂îÍ∞ÄÎêú Îß§Ïπ≠ Í∏∞Îä•
function findMatchingNames(total) {
  if (!window.BIBLICAL_NAMES) return [];
  let matches = [];
  for (const entry of window.BIBLICAL_NAMES) {
    const {total: t} = sumHebrew(entry.hebrew);
    if (t === total) matches.push(entry.name + " (" + entry.hebrew + ")");
  }
  return matches;
}

function calcFromHebrew(h){
  const {total, parts} = sumHebrew(h);
  const red = reduction(total);
  const decomp = parts.map(p=>p[0]+":"+p[1]).join(" ¬∑ ");
  let out = "Hebrew Input: "+h+"\nSum: "+total+" (Reduction="+red+")\nBreakdown: "+(decomp||"-");
  const matches = findMatchingNames(total);
  if (matches.length) out += "\nMatches: " + matches.join(", ");
  document.getElementById("result").innerText = out;
  document.getElementById("interpretation").innerText = NUMBER_INTERP[total] || "";
  document.getElementById("reduction-note").innerText = "Reduction: "+red;
}

function calcFromNumber(n){
  const red = reduction(n);
  let out = "Numeric Input: "+n;
  const matches = findMatchingNames(n);
  if (matches.length) out += "\nMatches: " + matches.join(", ");
  document.getElementById("result").innerText = out;
  document.getElementById("interpretation").innerText = NUMBER_INTERP[n] || "";
  document.getElementById("reduction-note").innerText = "Reduction: "+red;
}

function onTrans(){
  const raw = document.getElementById("raw").value.trim();
  const heb = translitAuto(raw);
  document.getElementById("heb").value = heb;
}
function onCalc(){
  const raw = document.getElementById("raw").value.trim();
  const heb = document.getElementById("heb").value.trim();
  if(heb){ calcFromHebrew(heb); return; }
  if(isNumeric(raw)){ calcFromNumber(parseInt(raw,10)); return; }
  const tr = translitAuto(raw);
  if(tr){ document.getElementById("heb").value = tr; calcFromHebrew(tr); return; }
  document.getElementById("result").innerText = "No input provided.";
  document.getElementById("interpretation").innerText = "";
  document.getElementById("reduction-note").innerText = "";
}
document.getElementById("btn-trans").addEventListener("click", onTrans);
document.getElementById("btn-calc").addEventListener("click", onCalc);
</script>

<div class="card" id="learn" style="margin-top:18px">
<h2>Learn More: Hidden Codes</h2>
<div id="what-is-gematria">
<h3>What is Gematria?</h3>
<p>On the surface, Gematria may look like simple arithmetic. But throughout history it was regarded as a secret code within esoteric traditions. In Hebrew, every letter corresponds to a number, and numbers were believed to reflect the order of the universe. Some claim certain words and events in scripture were deliberately designed to share the same numerical values.</p>
</div>

<div id="hebrew-numerology-history">
<h3>The Secret History of Hebrew and Numerology</h3>
<p>Some argue that Hebrew letters were more than language: they were codes used to preserve power and secrets. In Kabbalah, letters, numbers, and the cosmos correspond. Interpretations such as 26 = YHWH and 666 = Number of the Beast still appear in politics, corporate logos, and pop culture. Mystics are said to have used this system to explore prophecy and the principles of creation.</p>
</div>

<div id="usage-examples">
<h3>Examples of Use</h3>
<ol>
<li>A name adds up to 33? ‚Äî the number of ‚Äúperfect wisdom‚Äù emphasized by secret groups.</li>
<li>A leader‚Äôs name totals 666? ‚Äî coincidence, or a coded warning?</li>
<li>An event date sums to 911? ‚Äî perhaps history encoded as a hidden pattern.</li>
</ol>
<p class="subtle">Interpretation is always speculative, but numbers often reveal hidden messages behind history and power.</p>
</div>
</div>

<script src="extra.js"></script>
<script src="names.js"></script>

</body>
</html>
